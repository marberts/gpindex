<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Price indexes — price_indexes • gpindex</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Price indexes — price_indexes"><meta name="description" content="Calculate a variety of price indexes using information on prices and
quantities at two points in time."><meta property="og:description" content="Calculate a variety of price indexes using information on prices and
quantities at two points in time."><meta property="og:image" content="https://marberts.github.io/gpindex/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">gpindex</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.6.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/gpindex.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/marberts/gpindex/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Price indexes</h1>
      <small class="dont-index">Source: <a href="https://github.com/marberts/gpindex/blob/v0.6.2/R/price_indexes.R" class="external-link"><code>R/price_indexes.R</code></a></small>
      <div class="d-none name"><code>price_indexes.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Calculate a variety of price indexes using information on prices and
quantities at two points in time.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">arithmetic_index</span><span class="op">(</span><span class="va">type</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">geometric_index</span><span class="op">(</span><span class="va">type</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">harmonic_index</span><span class="op">(</span><span class="va">type</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">laspeyres_index</span><span class="op">(</span><span class="va">p1</span>, <span class="va">p0</span>, <span class="va">q0</span>, na.rm <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">paasche_index</span><span class="op">(</span><span class="va">p1</span>, <span class="va">p0</span>, <span class="va">q1</span>, na.rm <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">jevons_index</span><span class="op">(</span><span class="va">p1</span>, <span class="va">p0</span>, na.rm <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">lowe_index</span><span class="op">(</span><span class="va">p1</span>, <span class="va">p0</span>, <span class="va">qb</span>, na.rm <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">young_index</span><span class="op">(</span><span class="va">p1</span>, <span class="va">p0</span>, <span class="va">pb</span>, <span class="va">qb</span>, na.rm <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">fisher_index</span><span class="op">(</span><span class="va">p1</span>, <span class="va">p0</span>, <span class="va">q1</span>, <span class="va">q0</span>, na.rm <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">hlp_index</span><span class="op">(</span><span class="va">p1</span>, <span class="va">p0</span>, <span class="va">q1</span>, <span class="va">q0</span>, na.rm <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">lm_index</span><span class="op">(</span><span class="va">elasticity</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">cswd_index</span><span class="op">(</span><span class="va">p1</span>, <span class="va">p0</span>, na.rm <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">cswdb_index</span><span class="op">(</span><span class="va">p1</span>, <span class="va">p0</span>, <span class="va">q1</span>, <span class="va">q0</span>, na.rm <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">bw_index</span><span class="op">(</span><span class="va">p1</span>, <span class="va">p0</span>, na.rm <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">stuvel_index</span><span class="op">(</span><span class="va">a</span>, <span class="va">b</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">arithmetic_agmean_index</span><span class="op">(</span><span class="va">elasticity</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">geometric_agmean_index</span><span class="op">(</span><span class="va">elasticity</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">lehr_index</span><span class="op">(</span><span class="va">p1</span>, <span class="va">p0</span>, <span class="va">q1</span>, <span class="va">q0</span>, na.rm <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-type">type<a class="anchor" aria-label="anchor" href="#arg-type"></a></dt>
<dd><p>The name of the index. See details for the possible types of
indexes.</p></dd>


<dt id="arg-p-">p1<a class="anchor" aria-label="anchor" href="#arg-p-"></a></dt>
<dd><p>Current-period prices.</p></dd>


<dt id="arg-p-">p0<a class="anchor" aria-label="anchor" href="#arg-p-"></a></dt>
<dd><p>Base-period prices.</p></dd>


<dt id="arg-q-">q0<a class="anchor" aria-label="anchor" href="#arg-q-"></a></dt>
<dd><p>Base-period quantities.</p></dd>


<dt id="arg-na-rm">na.rm<a class="anchor" aria-label="anchor" href="#arg-na-rm"></a></dt>
<dd><p>Should missing values be removed? By default missing values for
prices or quantities return a missing value.</p></dd>


<dt id="arg-q-">q1<a class="anchor" aria-label="anchor" href="#arg-q-"></a></dt>
<dd><p>Current-period quantities.</p></dd>


<dt id="arg-qb">qb<a class="anchor" aria-label="anchor" href="#arg-qb"></a></dt>
<dd><p>Period-b quantities for the Lowe/Young index.</p></dd>


<dt id="arg-pb">pb<a class="anchor" aria-label="anchor" href="#arg-pb"></a></dt>
<dd><p>Period-b prices for the Lowe/Young index.</p></dd>


<dt id="arg-elasticity">elasticity<a class="anchor" aria-label="anchor" href="#arg-elasticity"></a></dt>
<dd><p>The elasticity of substitution for the Lloyd-Moulton and
AG mean indexes.</p></dd>


<dt id="arg-a-b">a, b<a class="anchor" aria-label="anchor" href="#arg-a-b"></a></dt>
<dd><p>Parameters for the generalized Stuvel index.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p><code>arithmetic_index()</code>, <code>geometric_index()</code>, <code>harmonic_index()</code>, and
<code>stuvel_index()</code> each return a function to compute the relevant price
indexes; <code>lm_index()</code>, <code>arithmetic_agmean_index()</code>, and
<code>geometric_agmean_index()</code> each return a function to calculate the
relevant index for a given elasticity of substitution. The others return a
numeric value giving the change in price between the base period and current
period.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The <code>arithmetic_index()</code>, <code>geometric_index()</code>, and
<code>harmonic_index()</code> functions return a function to calculate a given
type of arithmetic, geometric (logarithmic), and harmonic index. Together,
these functions produce functions to calculate the following indexes.</p><ul><li><p><strong>Arithmetic indexes</strong></p></li>
<li><p>Carli</p></li>
<li><p>Dutot</p></li>
<li><p>Laspeyres</p></li>
<li><p>Palgrave</p></li>
<li><p>Unnamed index (arithmetic mean of Laspeyres and Palgrave)</p></li>
<li><p>Drobisch (or Sidgwick, arithmetic mean of Laspeyres and Paasche)</p></li>
<li><p>Walsh-I (arithmetic Walsh)</p></li>
<li><p>Marshall-Edgeworth</p></li>
<li><p>Geary-Khamis</p></li>
<li><p>Lowe</p></li>
<li><p>Young</p></li>
<li><p>Hybrid-CSWD</p></li>
<li><p><strong>Geometric indexes</strong></p></li>
<li><p>Jevons</p></li>
<li><p>Geometric Laspeyres (or Jöhr)</p></li>
<li><p>Geometric Paasche</p></li>
<li><p>Geometric Young</p></li>
<li><p>Törnqvist (or Törnqvist-Theil)</p></li>
<li><p>Montgomery-Vartia / Vartia-I</p></li>
<li><p>Sato-Vartia / Vartia-II</p></li>
<li><p>Walsh-II (geometric Walsh)</p></li>
<li><p>Theil</p></li>
<li><p>Rao</p></li>
<li><p><strong>Harmonic indexes</strong></p></li>
<li><p>Coggeshall (equally weighted harmonic index)</p></li>
<li><p>Paasche</p></li>
<li><p>Harmonic Laspeyres</p></li>
<li><p>Harmonic Young</p></li>
</ul><p>Along with the <code>lm_index()</code> function to calculate the Lloyd-Moulton
index, these are just convenient wrappers for
<code><a href="generalized_mean.html">generalized_mean()</a></code> and <code><a href="index_weights.html">index_weights()</a></code>.</p>
<p>The Laspeyres, Paasche, Jevons, Lowe, and Young indexes are among the most
common price indexes, and so they get their own functions. The
<code>laspeyres_index()</code>, <code>lowe_index()</code>, and <code>young_index()</code>
functions correspond to setting the appropriate <code>type</code> in
<code>arithmetic_index()</code>; <code>paasche_index()</code> and <code>jevons_index()</code>
instead come from the <code>harmonic_index()</code> and <code>geometric_index()</code>
functions.</p>
<p>In addition to these indexes, there are also functions for calculating a
variety of indexes not based on generalized means. The Fisher index is the
geometric mean of the arithmetic Laspeyres and Paasche indexes; the Harmonic
Laspeyres Paasche (or Harmonic Paasche Laspeyres) index is the harmonic
analog of the Fisher index (8054 on Fisher's list). The
Carruthers-Sellwood-Ward-Dalen and Carruthers-Sellwood-Ward-Dalen-Balk
indexes are sample analogs of the Fisher
index; the Balk-Walsh index is the sample analog of the Walsh index. The AG
mean index is the arithmetic or geometric mean of the geometric and
arithmetic Laspeyres indexes, weighted by the elasticity of substitution.
The <code>stuvel_index()</code> function returns a function to calculate a Stuvel
index of the given parameters. The Lehr index is an alternative to the
Geary-Khamis index, and is the implicit price index for Fisher's index 4153.</p>
    </div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p>There are different ways to deal with missing values in a price index,
and care should be taken when relying on these functions to remove missing
values. Setting <code>na.rm = TRUE</code> removes price relatives with missing
information, either because of a missing price or a missing weight, while
using all available non-missing information to make the weights.</p>
<p>Certain properties of an index-number formula may not work as expected when
removing missing values if there is ambiguity about how to remove missing
values from the weights (as in, e.g., a Törnqvist or Sato-Vartia index). The
<code><a href="balanced.html">balanced()</a></code> operator may be helpful, as it balances the removal of missing
values across prices and quantities prior to making the weights.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Balk, B. M. (2008). <em>Price and Quantity Index Numbers</em>.
Cambridge University Press.</p>
<p>Fisher, I. (1922). <em>The Making of Index Numbers</em>. Houghton Mifflin
Company.</p>
<p>IMF, ILO, Eurostat, UNECE, OECD, and World Bank. (2020).
<em>Consumer Price Index Manual: Concepts and Methods</em>.
International Monetary Fund.</p>
<p>von der Lippe, P. (2007). <em>Index Theory and Price Statistics</em>. Peter Lang.</p>
<p>von der Lippe, P. (2015). Generalized Statistical Means and New Price Index
Formulas, Notes on some unexplored index formulas, their interpretations and
generalizations. Munich Personal RePEc Archive paper no. 64952.</p>
<p>Selvanathan, E. A. and Rao, D. S. P. (1994).
<em>Index Numbers: A Stochastic Approach</em>. MacMillan.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="generalized_mean.html">generalized_mean()</a></code> for the generalized mean that powers
most of these functions.</p>
<p><code><a href="contributions.html">contributions()</a></code> for calculating percent-change contributions.</p>
<p><code><a href="quantity_index.html">quantity_index()</a></code> to remap the arguments in these functions for a
quantity index.</p>
<p><code><a href="price_data.html">price6()</a></code> for an example of how to use these functions with more
than two time periods.</p>
<p>The <span class="pkg">piar</span> package has more functionality working with price indexes for
multiple groups of products over many time periods.</p>
<p>Other price index functions:
<code><a href="geks.html">geks</a>()</code>,
<code><a href="index_weights.html">index_weights</a>()</code>,
<code><a href="splice_index.html">splice_index</a>()</code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">p0</span> <span class="op">&lt;-</span> <span class="va">price6</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span></span></span>
<span class="r-in"><span><span class="va">p1</span> <span class="op">&lt;-</span> <span class="va">price6</span><span class="op">[[</span><span class="fl">3</span><span class="op">]</span><span class="op">]</span></span></span>
<span class="r-in"><span><span class="va">q0</span> <span class="op">&lt;-</span> <span class="va">quantity6</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span></span></span>
<span class="r-in"><span><span class="va">q1</span> <span class="op">&lt;-</span> <span class="va">quantity6</span><span class="op">[[</span><span class="fl">3</span><span class="op">]</span><span class="op">]</span></span></span>
<span class="r-in"><span><span class="va">pb</span> <span class="op">&lt;-</span> <span class="va">price6</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span></span>
<span class="r-in"><span><span class="va">qb</span> <span class="op">&lt;-</span> <span class="va">quantity6</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#---- Calculating price indexes ----</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Most indexes can be calculated by combining the appropriate weights</span></span></span>
<span class="r-in"><span><span class="co"># with the correct type of mean</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">geometric_index</span><span class="op">(</span><span class="st">"Laspeyres"</span><span class="op">)</span><span class="op">(</span><span class="va">p1</span>, <span class="va">p0</span>, <span class="va">q0</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.8705581</span>
<span class="r-in"><span><span class="fu"><a href="generalized_mean.html">geometric_mean</a></span><span class="op">(</span><span class="va">p1</span> <span class="op">/</span> <span class="va">p0</span>, <span class="fu"><a href="index_weights.html">index_weights</a></span><span class="op">(</span><span class="st">"Laspeyres"</span><span class="op">)</span><span class="op">(</span><span class="va">p0</span>, <span class="va">q0</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.8705581</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Arithmetic Laspeyres index</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">laspeyres_index</span><span class="op">(</span><span class="va">p1</span>, <span class="va">p0</span>, <span class="va">q0</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.9609929</span>
<span class="r-in"><span><span class="fu"><a href="generalized_mean.html">arithmetic_mean</a></span><span class="op">(</span><span class="va">p1</span> <span class="op">/</span> <span class="va">p0</span>, <span class="fu"><a href="index_weights.html">index_weights</a></span><span class="op">(</span><span class="st">"Laspeyres"</span><span class="op">)</span><span class="op">(</span><span class="va">p0</span>, <span class="va">q0</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.9609929</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Harmonic calculation for the arithmetic Laspeyres</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="generalized_mean.html">harmonic_mean</a></span><span class="op">(</span><span class="va">p1</span> <span class="op">/</span> <span class="va">p0</span>, <span class="fu"><a href="index_weights.html">index_weights</a></span><span class="op">(</span><span class="st">"HybridLaspeyres"</span><span class="op">)</span><span class="op">(</span><span class="va">p1</span>, <span class="va">q0</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.9609929</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Same as transmuting the weights</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/all.equal.html" class="external-link">all.equal</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="scale_weights.html">scale_weights</a></span><span class="op">(</span><span class="fu"><a href="index_weights.html">index_weights</a></span><span class="op">(</span><span class="st">"HybridLaspeyres"</span><span class="op">)</span><span class="op">(</span><span class="va">p1</span>, <span class="va">q0</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  <span class="fu"><a href="transmute_weights.html">transmute_weights</a></span><span class="op">(</span><span class="fl">1</span>, <span class="op">-</span><span class="fl">1</span><span class="op">)</span><span class="op">(</span><span class="va">p1</span> <span class="op">/</span> <span class="va">p0</span>, <span class="fu"><a href="index_weights.html">index_weights</a></span><span class="op">(</span><span class="st">"Laspeyres"</span><span class="op">)</span><span class="op">(</span><span class="va">p0</span>, <span class="va">q0</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># This strategy can be used to make more exotic indexes, like the</span></span></span>
<span class="r-in"><span><span class="co"># quadratic-mean index (von der Lippe, 2007, p. 61)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="generalized_mean.html">generalized_mean</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span><span class="op">(</span><span class="va">p1</span> <span class="op">/</span> <span class="va">p0</span>, <span class="fu"><a href="index_weights.html">index_weights</a></span><span class="op">(</span><span class="st">"Laspeyres"</span><span class="op">)</span><span class="op">(</span><span class="va">p0</span>, <span class="va">q0</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1.020762</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Or the exponential mean index (p. 62)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="fu"><a href="generalized_mean.html">arithmetic_mean</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="va">p1</span> <span class="op">/</span> <span class="va">p0</span><span class="op">)</span>, <span class="fu"><a href="index_weights.html">index_weights</a></span><span class="op">(</span><span class="st">"Laspeyres"</span><span class="op">)</span><span class="op">(</span><span class="va">p0</span>, <span class="va">q0</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1.013369</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Or the arithmetic hybrid index (von der Lippe, 2015, p. 5)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="generalized_mean.html">arithmetic_mean</a></span><span class="op">(</span><span class="va">p1</span> <span class="op">/</span> <span class="va">p0</span>, <span class="fu"><a href="index_weights.html">index_weights</a></span><span class="op">(</span><span class="st">"HybridLaspeyres"</span><span class="op">)</span><span class="op">(</span><span class="va">p1</span>, <span class="va">q0</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1.084248</span>
<span class="r-in"><span><span class="fu"><a href="lehmer_mean.html">contraharmonic_mean</a></span><span class="op">(</span><span class="va">p1</span> <span class="op">/</span> <span class="va">p0</span>, <span class="fu"><a href="index_weights.html">index_weights</a></span><span class="op">(</span><span class="st">"Laspeyres"</span><span class="op">)</span><span class="op">(</span><span class="va">p0</span>, <span class="va">q0</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1.084248</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Unlike its arithmetic counterpart, the geometric Laspeyres can</span></span></span>
<span class="r-in"><span><span class="co"># increase when base-period prices increase if some of these prices</span></span></span>
<span class="r-in"><span><span class="co"># are small</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">gl</span> <span class="op">&lt;-</span> <span class="fu">geometric_index</span><span class="op">(</span><span class="st">"Laspeyres"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">p0_small</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/replace.html" class="external-link">replace</a></span><span class="op">(</span><span class="va">p0</span>, <span class="fl">1</span>, <span class="va">p0</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">/</span> <span class="fl">5</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">p0_dx</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/replace.html" class="external-link">replace</a></span><span class="op">(</span><span class="va">p0_small</span>, <span class="fl">1</span>, <span class="va">p0_small</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">+</span> <span class="fl">0.01</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/gl.html" class="external-link">gl</a></span><span class="op">(</span><span class="va">p1</span>, <span class="va">p0_small</span>, <span class="va">q0</span><span class="op">)</span> <span class="op">&lt;</span> <span class="fu"><a href="https://rdrr.io/r/base/gl.html" class="external-link">gl</a></span><span class="op">(</span><span class="va">p1</span>, <span class="va">p0_dx</span>, <span class="va">q0</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#---- Price updating the weights in a price index ----</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Chain an index by price updating the weights</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">p2</span> <span class="op">&lt;-</span> <span class="va">price6</span><span class="op">[[</span><span class="fl">4</span><span class="op">]</span><span class="op">]</span></span></span>
<span class="r-in"><span><span class="fu">laspeyres_index</span><span class="op">(</span><span class="va">p2</span>, <span class="va">p0</span>, <span class="va">q0</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.970922</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">I1</span> <span class="op">&lt;-</span> <span class="fu">laspeyres_index</span><span class="op">(</span><span class="va">p1</span>, <span class="va">p0</span>, <span class="va">q0</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">w_pu</span> <span class="op">&lt;-</span> <span class="fu"><a href="factor_weights.html">update_weights</a></span><span class="op">(</span><span class="va">p1</span> <span class="op">/</span> <span class="va">p0</span>, <span class="fu"><a href="index_weights.html">index_weights</a></span><span class="op">(</span><span class="st">"Laspeyres"</span><span class="op">)</span><span class="op">(</span><span class="va">p0</span>, <span class="va">q0</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">I2</span> <span class="op">&lt;-</span> <span class="fu"><a href="generalized_mean.html">arithmetic_mean</a></span><span class="op">(</span><span class="va">p2</span> <span class="op">/</span> <span class="va">p1</span>, <span class="va">w_pu</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">I1</span> <span class="op">*</span> <span class="va">I2</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.970922</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Works for other types of indexes, too</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">harmonic_index</span><span class="op">(</span><span class="st">"Laspeyres"</span><span class="op">)</span><span class="op">(</span><span class="va">p2</span>, <span class="va">p0</span>, <span class="va">q0</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.5112654</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">I1</span> <span class="op">&lt;-</span> <span class="fu">harmonic_index</span><span class="op">(</span><span class="st">"Laspeyres"</span><span class="op">)</span><span class="op">(</span><span class="va">p1</span>, <span class="va">p0</span>, <span class="va">q0</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">w_pu</span> <span class="op">&lt;-</span> <span class="fu"><a href="factor_weights.html">factor_weights</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1</span><span class="op">)</span><span class="op">(</span><span class="va">p1</span> <span class="op">/</span> <span class="va">p0</span>, <span class="fu"><a href="index_weights.html">index_weights</a></span><span class="op">(</span><span class="st">"Laspeyres"</span><span class="op">)</span><span class="op">(</span><span class="va">p0</span>, <span class="va">q0</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">I2</span> <span class="op">&lt;-</span> <span class="fu"><a href="generalized_mean.html">harmonic_mean</a></span><span class="op">(</span><span class="va">p2</span> <span class="op">/</span> <span class="va">p1</span>, <span class="va">w_pu</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">I1</span> <span class="op">*</span> <span class="va">I2</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.5112654</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#---- Percent-change contributions ----</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Percent-change contributions for the Tornqvist index</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">w</span> <span class="op">&lt;-</span> <span class="fu"><a href="index_weights.html">index_weights</a></span><span class="op">(</span><span class="st">"Tornqvist"</span><span class="op">)</span><span class="op">(</span><span class="va">p1</span>, <span class="va">p0</span>, <span class="va">q1</span>, <span class="va">q0</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">(</span><span class="va">con</span> <span class="op">&lt;-</span> <span class="fu"><a href="contributions.html">geometric_contributions</a></span><span class="op">(</span><span class="va">p1</span> <span class="op">/</span> <span class="va">p0</span>, <span class="va">w</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] -0.01158644 -0.13847426  0.02391956 -0.02607786  0.09431814 -0.00896725</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/all.equal.html" class="external-link">all.equal</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">con</span><span class="op">)</span>, <span class="fu">geometric_index</span><span class="op">(</span><span class="st">"Tornqvist"</span><span class="op">)</span><span class="op">(</span><span class="va">p1</span>, <span class="va">p0</span>, <span class="va">q1</span>, <span class="va">q0</span><span class="op">)</span> <span class="op">-</span> <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#---- Missing values ----</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># NAs get special treatment</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">p_na</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/replace.html" class="external-link">replace</a></span><span class="op">(</span><span class="va">p0</span>, <span class="fl">6</span>, <span class="cn">NA</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Drops the last price relative</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">laspeyres_index</span><span class="op">(</span><span class="va">p1</span>, <span class="va">p_na</span>, <span class="va">q0</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.9684288</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Only drops the last period-0 price</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">p1</span> <span class="op">*</span> <span class="va">q0</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">p_na</span> <span class="op">*</span> <span class="va">q0</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.9948605</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#---- von Bortkiewicz decomposition ----</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">paasche_index</span><span class="op">(</span><span class="va">p1</span>, <span class="va">p0</span>, <span class="va">q1</span><span class="op">)</span> <span class="op">/</span> <span class="fu">laspeyres_index</span><span class="op">(</span><span class="va">p1</span>, <span class="va">p0</span>, <span class="va">q0</span><span class="op">)</span> <span class="op">-</span> <span class="fl">1</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] -0.04099992</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">wl</span> <span class="op">&lt;-</span> <span class="fu"><a href="scale_weights.html">scale_weights</a></span><span class="op">(</span><span class="fu"><a href="index_weights.html">index_weights</a></span><span class="op">(</span><span class="st">"Laspeyres"</span><span class="op">)</span><span class="op">(</span><span class="va">p0</span>, <span class="va">q0</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">pl</span> <span class="op">&lt;-</span> <span class="fu">laspeyres_index</span><span class="op">(</span><span class="va">p1</span>, <span class="va">p0</span>, <span class="va">q0</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">ql</span> <span class="op">&lt;-</span> <span class="fu"><a href="quantity_index.html">quantity_index</a></span><span class="op">(</span><span class="va">laspeyres_index</span><span class="op">)</span><span class="op">(</span><span class="va">q1</span>, <span class="va">q0</span>, <span class="va">p0</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">wl</span> <span class="op">*</span> <span class="op">(</span><span class="va">p1</span> <span class="op">/</span> <span class="va">p0</span> <span class="op">/</span> <span class="va">pl</span> <span class="op">-</span> <span class="fl">1</span><span class="op">)</span> <span class="op">*</span> <span class="op">(</span><span class="va">q1</span> <span class="op">/</span> <span class="va">q0</span> <span class="op">/</span> <span class="va">ql</span> <span class="op">-</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] -0.04099992</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Similar decomposition for geometric Laspeyres/Paasche</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">wp</span> <span class="op">&lt;-</span> <span class="fu"><a href="scale_weights.html">scale_weights</a></span><span class="op">(</span><span class="fu"><a href="index_weights.html">index_weights</a></span><span class="op">(</span><span class="st">"Paasche"</span><span class="op">)</span><span class="op">(</span><span class="va">p1</span>, <span class="va">q1</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">gl</span> <span class="op">&lt;-</span> <span class="fu">geometric_index</span><span class="op">(</span><span class="st">"Laspeyres"</span><span class="op">)</span><span class="op">(</span><span class="va">p1</span>, <span class="va">p0</span>, <span class="va">q0</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">gp</span> <span class="op">&lt;-</span> <span class="fu">geometric_index</span><span class="op">(</span><span class="st">"Paasche"</span><span class="op">)</span><span class="op">(</span><span class="va">p1</span>, <span class="va">p0</span>, <span class="va">q1</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="va">gp</span> <span class="op">/</span> <span class="va">gl</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.1388242</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="fu"><a href="scale_weights.html">scale_weights</a></span><span class="op">(</span><span class="va">wl</span><span class="op">)</span> <span class="op">*</span> <span class="op">(</span><span class="va">wp</span> <span class="op">/</span> <span class="va">wl</span> <span class="op">-</span> <span class="fl">1</span><span class="op">)</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="va">p1</span> <span class="op">/</span> <span class="va">p0</span> <span class="op">/</span> <span class="va">gl</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.1388242</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#---- Consistency in aggregation ----</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">p0a</span> <span class="op">&lt;-</span> <span class="va">p0</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span></span></span>
<span class="r-in"><span><span class="va">p0b</span> <span class="op">&lt;-</span> <span class="va">p0</span><span class="op">[</span><span class="fl">4</span><span class="op">:</span><span class="fl">6</span><span class="op">]</span></span></span>
<span class="r-in"><span><span class="va">p1a</span> <span class="op">&lt;-</span> <span class="va">p1</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span></span></span>
<span class="r-in"><span><span class="va">p1b</span> <span class="op">&lt;-</span> <span class="va">p1</span><span class="op">[</span><span class="fl">4</span><span class="op">:</span><span class="fl">6</span><span class="op">]</span></span></span>
<span class="r-in"><span><span class="va">q0a</span> <span class="op">&lt;-</span> <span class="va">q0</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span></span></span>
<span class="r-in"><span><span class="va">q0b</span> <span class="op">&lt;-</span> <span class="va">q0</span><span class="op">[</span><span class="fl">4</span><span class="op">:</span><span class="fl">6</span><span class="op">]</span></span></span>
<span class="r-in"><span><span class="va">q1a</span> <span class="op">&lt;-</span> <span class="va">q1</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span></span></span>
<span class="r-in"><span><span class="va">q1b</span> <span class="op">&lt;-</span> <span class="va">q1</span><span class="op">[</span><span class="fl">4</span><span class="op">:</span><span class="fl">6</span><span class="op">]</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Indexes based on the generalized mean with value share weights are</span></span></span>
<span class="r-in"><span><span class="co"># consistent in aggregation</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">lm_index</span><span class="op">(</span><span class="fl">0.75</span><span class="op">)</span><span class="op">(</span><span class="va">p1</span>, <span class="va">p0</span>, <span class="va">q0</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.8962918</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">w</span> <span class="op">&lt;-</span> <span class="fu"><a href="index_weights.html">index_weights</a></span><span class="op">(</span><span class="st">"LloydMoulton"</span><span class="op">)</span><span class="op">(</span><span class="va">p0</span>, <span class="va">q0</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">Ia</span> <span class="op">&lt;-</span> <span class="fu"><a href="generalized_mean.html">generalized_mean</a></span><span class="op">(</span><span class="fl">0.25</span><span class="op">)</span><span class="op">(</span><span class="va">p1a</span> <span class="op">/</span> <span class="va">p0a</span>, <span class="va">w</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">Ib</span> <span class="op">&lt;-</span> <span class="fu"><a href="generalized_mean.html">generalized_mean</a></span><span class="op">(</span><span class="fl">0.25</span><span class="op">)</span><span class="op">(</span><span class="va">p1b</span> <span class="op">/</span> <span class="va">p0b</span>, <span class="va">w</span><span class="op">[</span><span class="fl">4</span><span class="op">:</span><span class="fl">6</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="generalized_mean.html">generalized_mean</a></span><span class="op">(</span><span class="fl">0.25</span><span class="op">)</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">Ia</span>, <span class="va">Ib</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">w</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">w</span><span class="op">[</span><span class="fl">4</span><span class="op">:</span><span class="fl">6</span><span class="op">]</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.8962918</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Agrees with group-wise indexes</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/all.equal.html" class="external-link">all.equal</a></span><span class="op">(</span><span class="fu">lm_index</span><span class="op">(</span><span class="fl">0.75</span><span class="op">)</span><span class="op">(</span><span class="va">p1a</span>, <span class="va">p0a</span>, <span class="va">q0a</span><span class="op">)</span>, <span class="va">Ia</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/all.equal.html" class="external-link">all.equal</a></span><span class="op">(</span><span class="fu">lm_index</span><span class="op">(</span><span class="fl">0.75</span><span class="op">)</span><span class="op">(</span><span class="va">p1b</span>, <span class="va">p0b</span>, <span class="va">q0b</span><span class="op">)</span>, <span class="va">Ib</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Care is needed with more complex weights, e.g., Drobisch, as this</span></span></span>
<span class="r-in"><span><span class="co"># doesn't fit Balk's (2008) definition (p. 113) of a generalized-mean</span></span></span>
<span class="r-in"><span><span class="co"># index (it's the arithmetic mean of a Laspeyres and Paasche index)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">arithmetic_index</span><span class="op">(</span><span class="st">"Drobisch"</span><span class="op">)</span><span class="op">(</span><span class="va">p1</span>, <span class="va">p0</span>, <span class="va">q1</span>, <span class="va">q0</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.9412926</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">w</span> <span class="op">&lt;-</span> <span class="fu"><a href="index_weights.html">index_weights</a></span><span class="op">(</span><span class="st">"Drobisch"</span><span class="op">)</span><span class="op">(</span><span class="va">p1</span>, <span class="va">p0</span>, <span class="va">q1</span>, <span class="va">q0</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">Ia</span> <span class="op">&lt;-</span> <span class="fu"><a href="generalized_mean.html">arithmetic_mean</a></span><span class="op">(</span><span class="va">p1a</span> <span class="op">/</span> <span class="va">p0a</span>, <span class="va">w</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">Ib</span> <span class="op">&lt;-</span> <span class="fu"><a href="generalized_mean.html">arithmetic_mean</a></span><span class="op">(</span><span class="va">p1b</span> <span class="op">/</span> <span class="va">p0b</span>, <span class="va">w</span><span class="op">[</span><span class="fl">4</span><span class="op">:</span><span class="fl">6</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="generalized_mean.html">arithmetic_mean</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">Ia</span>, <span class="va">Ib</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">w</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">w</span><span class="op">[</span><span class="fl">4</span><span class="op">:</span><span class="fl">6</span><span class="op">]</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.9412926</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Does not agree with group-wise indexes</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/all.equal.html" class="external-link">all.equal</a></span><span class="op">(</span><span class="fu">arithmetic_index</span><span class="op">(</span><span class="st">"Drobisch"</span><span class="op">)</span><span class="op">(</span><span class="va">p1a</span>, <span class="va">p0a</span>, <span class="va">q1a</span>, <span class="va">q0a</span><span class="op">)</span>, <span class="va">Ia</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "Mean relative difference: 0.000735017"</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/all.equal.html" class="external-link">all.equal</a></span><span class="op">(</span><span class="fu">arithmetic_index</span><span class="op">(</span><span class="st">"Drobisch"</span><span class="op">)</span><span class="op">(</span><span class="va">p1b</span>, <span class="va">p0b</span>, <span class="va">q1b</span>, <span class="va">q0b</span><span class="op">)</span>, <span class="va">Ib</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "Mean relative difference: 0.0004652739"</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Steve Martin.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer></div>





  </body></html>

